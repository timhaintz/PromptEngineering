@import './tokens.css';

/* prefers-color-scheme auto handled via ThemeProvider selecting data-theme; media query fallback removed */

/* explicit light override no longer needed; tokens.css root is light */

/* dark overrides now defined in tokens.css */

/* high-contrast overrides now defined in tokens.css */

/* High Contrast active pill needs explicit stronger outline for discoverability */
html[data-theme='high-contrast'] .active-pill {
  background: #1A1A1A !important;
  color: #FFFFFF !important;
  border: 2px solid #FFBF00 !important;
}

@media (forced-colors: active) {
  html:not([data-theme]) {
    /* Map forced-colors system palette to our semantic tokens */
    --surface-1: Canvas;
    --surface-2: Canvas;
    --surface-card: Canvas;
    --surface-hover: CanvasText;
    --text-primary: CanvasText;
    --text-secondary: CanvasText;
    --text-muted: GrayText;
    --accent: LinkText;
    --accent-hover: LinkText;
    --accent-active-bg: LinkText;
    --border-default: GrayText;
    --border-strong: GrayText;
    --focus-ring: Highlight;
    --focus-ring-outer: Highlight;
  }
}

/* Utility layer */
.bg-base { background-color: var(--surface-1); }
.bg-surface-1 { background-color: var(--surface-1); }
.bg-surface-2 { background-color: var(--surface-2); }
.bg-surface-hover { background-color: var(--surface-hover); }
.text-primary { color: var(--text-primary); }
.text-secondary { color: var(--text-secondary); }
.text-muted { color: var(--text-muted); }
.border-muted { border-color: var(--border-default); }
.border-strong { border-color: var(--border-strong); }
.focus-ring:focus-visible { outline: 2px solid var(--focus-ring); outline-offset:2px; box-shadow:0 0 0 4px var(--focus-ring-outer); }

/* Active nav pill pattern */
.active-pill { background: var(--accent-active-bg); border:1px solid var(--accent); color: var(--text-primary); }

/* Minimal legacy overrides (few remaining ad-hoc elements or print contexts) */
html[data-theme='dark'] .bg-white { background-color: var(--surface-1) !important; }
html[data-theme='dark'] .bg-gray-50 { background-color: var(--surface-2) !important; }
html[data-theme='high-contrast'] .bg-white,
html[data-theme='high-contrast'] .bg-gray-50 { background-color: var(--surface-1) !important; }

/* ------------------------------------------------------------------
  Utility abstractions (phase 2 theming refactor)
  Replaces repeated long class chains across pages.
------------------------------------------------------------------- */
/* Note: Not using @apply because this file is plain CSS imported before Tailwind processing in this setup. */
.surface-card {
  background: var(--surface-card);
  color: var(--text-primary);
  border: 1px solid var(--border-default);
  border-radius: 0.5rem; /* rounded-lg */
  box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05); /* shadow-sm */
  transition: background-color var(--transition-base), border-color var(--transition-base), box-shadow var(--transition-base), color var(--transition-base);
}
.surface-card-hover:hover {
  border-color: var(--border-strong);
  box-shadow: 0 4px 10px -2px rgba(0,0,0,0.15), 0 2px 4px rgba(0,0,0,0.08);
}
.surface-card-interactive { cursor: pointer; }
.surface-card-interactive:hover { border-color: var(--border-strong); box-shadow: 0 4px 10px -2px rgba(0,0,0,0.15), 0 2px 4px rgba(0,0,0,0.08); }

.input-base {
  background: var(--surface-1);
  color: var(--text-primary);
  border: 1px solid var(--border-default);
  border-radius: 0.375rem; /* rounded */
  padding: 0.25rem 0.5rem; /* px-2 py-1 */
  font-size: 0.875rem; /* text-sm */
  line-height: 1.25rem;
  transition: background-color var(--transition-fast), border-color var(--transition-fast), box-shadow var(--transition-fast), color var(--transition-fast);
}
.input-base::placeholder { color: var(--text-muted); }
.input-base:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; border-color: var(--accent); }

.chip-filter, .pill-filter {
  display: inline-flex; align-items: center; gap: 0.25rem;
  background: var(--surface-1); color: var(--text-primary);
  border: 1px solid var(--border-default);
  font-size: 0.75rem; line-height: 1rem; /* text-xs */
  padding: 0.125rem 0.5rem; /* py-0.5 px-2 pattern */
  transition: background-color var(--transition-fast), border-color var(--transition-fast), color var(--transition-fast);
}
.chip-filter { border-radius: 9999px; }
.pill-filter { border-radius: 0.25rem; }
.chip-filter:hover, .pill-filter:hover { border-color: var(--accent); }

/* Badges (status/category tokens) */
 .badge-category, .badge-ai, .badge-generic {
  display:inline-flex;align-items:center;gap:0.25rem;
  font-size:0.625rem; /* text-[10px] */
  font-weight:600;
  line-height:1;
  padding:0.25rem 0.5rem; /* px-2 py-0.5 */
  border:1px solid var(--border-default);
  border-radius:9999px;
  background: var(--surface-2);
  color: var(--text-secondary);
  transition: background-color var(--transition-fast), border-color var(--transition-fast), color var(--transition-fast);
}
 .badge-category { background: var(--accent-active-bg); border-color: var(--accent); color: var(--accent-hover); }
 .badge-ai { background: linear-gradient(90deg,var(--accent-active-bg),rgba(255,215,0,0.15)); color: var(--text-primary); border-color: var(--border-default); }

html[data-theme='dark'] .badge-category { color: var(--accent-hover); }
html[data-theme='dark'] .badge-ai { color: var(--text-secondary); }
html[data-theme='high-contrast'] .badge-category, html[data-theme='high-contrast'] .badge-ai { background: var(--surface-1); color: var(--text-primary); border-color: var(--accent); }

/* Primary button */
 .btn-primary {
  background: var(--accent);
  color:#FFFFFF;
  border:1px solid var(--accent);
  border-radius:0.375rem;
  font-weight:500;
  line-height:1.25rem;
  padding:0.375rem 0.75rem; /* py-1.5 px-3 */
  transition: background-color var(--transition-fast), border-color var(--transition-fast), color var(--transition-fast), box-shadow var(--transition-fast);
}
 .btn-primary:hover { background: var(--accent-hover); }
 .btn-primary:focus-visible { outline:2px solid var(--focus-ring); outline-offset:2px; }
html[data-theme='high-contrast'] .btn-primary { background: var(--accent); color: var(--text-primary); }

/* Heatmap utility (used in matrix). Uses accent color with varying mix percentages */
.heat-0 { background: transparent; }
 .heat-1 { background: color-mix(in srgb, var(--accent) 15%, transparent); }
 .heat-2 { background: color-mix(in srgb, var(--accent) 30%, transparent); }
 .heat-3 { background: color-mix(in srgb, var(--accent) 45%, transparent); }
 .heat-4 { background: color-mix(in srgb, var(--accent) 60%, transparent); }
html[data-theme='high-contrast'] .heat-1,
html[data-theme='high-contrast'] .heat-2,
html[data-theme='high-contrast'] .heat-3,
html[data-theme='high-contrast'] .heat-4 { outline:1px solid var(--border-strong); }

/* Unified tile styling (used for category/logic tiles) */
.tile {
  position:relative;
  display:flex;flex-direction:column;justify-content:center;
  gap:0.25rem;
  padding:0.75rem 1rem;
  background:var(--surface-1);
  border:1px solid var(--border-default);
  border-radius:0.375rem;
  transition: background-color var(--transition-fast), border-color var(--transition-fast), box-shadow var(--transition-fast);
}
 .tile:hover { background:var(--surface-hover); border-color:var(--accent); }
.tile:focus-visible { outline:2px solid var(--focus-ring); outline-offset:2px; }
html[data-theme='dark'] .tile { background:var(--surface-1); }
html[data-theme='high-contrast'] .tile { background:var(--surface-1); }
 .tile-title { font-weight:600; color:var(--text-secondary); }
 .tile-meta { font-size:0.65rem; font-weight:500; color:var(--text-muted); }
html[data-theme='high-contrast'] .tile-meta { color:var(--text-secondary); }

/* Accent spinner border utility */
.spinner-accent { border-color: var(--accent); }

/* Highlight term (search result emphasis) */
 .highlight-term {
  background: var(--accent-active-bg);
  color: var(--text-primary);
  padding: 0 0.2em;
  border-radius: 2px;
  font-weight: 500;
}
html[data-theme='dark'] .highlight-term { color: var(--text-primary); }
html[data-theme='high-contrast'] .highlight-term { background: var(--accent); color: var(--text-primary); }

/* Generic small id badge (mono) */
 .badge-id { background: var(--surface-2); color: var(--text-muted); border: 1px solid var(--border-default); font-family: var(--font-geist-mono, monospace); }

/* Accent border utility (used for example list left border) */
 .border-accent { border-color: var(--accent) !important; }

/* Small task / tag chip (application tasks) */
 .chip-task {
  display:inline-flex;align-items:center;gap:0.25rem;
  font-size:0.625rem;font-weight:600;line-height:1;
  background:var(--surface-2);
  color:var(--text-secondary);
  border:1px solid var(--border-default);
  border-radius:9999px;
  padding:0.25rem 0.5rem;
}
html[data-theme='dark'] .chip-task { background: var(--surface-1); color: var(--text-secondary); }
html[data-theme='high-contrast'] .chip-task { background: var(--surface-1); color: var(--text-primary); border-color: var(--accent); }
